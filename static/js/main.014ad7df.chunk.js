(window.webpackJsonpVK_GLAVCLUB=window.webpackJsonpVK_GLAVCLUB||[]).push([[0],{176:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);n(98),n(124),n(126),n(127),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166);var a=n(0),c=n.n(a),o=n(60),r=n.n(o),i=n(37),l=n.n(i),u=n(61),s=n.n(u),f=n(90),d=n(41),p=n(96),m=n.n(p),b=n(95),h=n.n(b),w=(n(175),n(62)),g=n.n(w),v=n(91),E=n.n(v),j=n(92),O=n.n(j),A=n(93),V=n.n(A),k=n(94),K=n.n(k),y=(n(176),function(e){var t=e.id,n=(e.go,e.fetchedUser,e.notificationSwitch),a=e.notificationEnabled;return c.a.createElement(E.a,{id:t},c.a.createElement(O.a,null,c.a.createElement(V.a,{asideContent:c.a.createElement(K.a,{onChange:function(e){return n()},checked:a})},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0445 \u043a\u043e\u043d\u0446\u0435\u0440\u0442\u043e\u0432 / \u0430\u043a\u0446\u0438\u044f\u0445")),c.a.createElement("iframe",{webkitallowfullscreen:"true",mozallowfullscreen:"true",allowFullScreen:"true",allow:"geolocation; microphone; camera; autoplay;",frameBorder:"0",src:"https://vk2feed.cultserv.ru/?refcode=glavclub",scrolling:"no"}))}),S=function(){var e=Object(a.useState)("home"),t=Object(d.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(null),i=Object(d.a)(r,2),u=i[0],p=i[1],b=Object(a.useState)(!1),w=Object(d.a)(b,2),v=w[0],E=w[1],j=Object(a.useState)(c.a.createElement(h.a,{size:"large"})),O=Object(d.a)(j,2),A=(O[0],O[1]),V=window.location.href,k=new URL(V).searchParams.get("vk_are_notifications_enabled");Object(a.useEffect)((function(){function e(){return(e=Object(f.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.sendPromise("VKWebAppGetUserInfo");case 2:t=e.sent,console.log(t),p(t),A(null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;if("VKWebAppUpdateConfig"===n){var c=document.createAttribute("scheme");c.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(c)}})),E(!!+k),console.log(111,k),function(){e.apply(this,arguments)}()}),[]);return u&&u.id&&fetch("https://glavclub.com/vk/KwgG259rqFt9gdDNpj8f/"+u.id).then((function(e){return e.json()})).then((function(e){console.log(e)})),c.a.createElement(m.a,{activePanel:n},c.a.createElement(y,{id:"home",fetchedUser:u,go:function(e){o(e.currentTarget.dataset.to)},notificationEnabled:v,notificationSwitch:function(){v?g.a.send("VKWebAppDenyNotifications",{}).then((function(){return E(!1)})):g.a.send("VKWebAppAllowNotifications",{}).then((function(){return E(!0)})).catch((function(){return E(!1)}))}}))};l.a.send("VKWebAppInit"),r.a.render(c.a.createElement(S,null),document.getElementById("root"))},97:function(e,t,n){e.exports=n(203)}},[[97,1,2]]]);
//# sourceMappingURL=main.014ad7df.chunk.js.map